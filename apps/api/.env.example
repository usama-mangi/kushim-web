# API Configuration
PORT=3001
DATABASE_URL="postgresql://username:password@localhost:5432/kushim_db?schema=public"
JWT_SECRET="REPLACE_WITH_RANDOM_64_CHAR_HEX_STRING"
# Generate ENCRYPTION_KEY with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY="REPLACE_WITH_RANDOM_64_CHAR_HEX_STRING"

# Machine Learning Configuration
# ML_SHADOW_MODE: true = log ML predictions but don't create links (default, recommended for initial deployment)
# ML_SHADOW_MODE: false = create links based on ML predictions (production mode after validation)
ML_SHADOW_MODE="true"
# ML_ENABLED: true = calculate ML scores, false = disable ML entirely
ML_ENABLED="true"
# ML_THRESHOLD: Minimum score for ML-assisted link creation (0.0-1.0, default: 0.85)
ML_THRESHOLD="0.85"
# DETERMINISTIC_THRESHOLD: Minimum score for deterministic link creation (0.0-1.0, default: 0.7)
DETERMINISTIC_THRESHOLD="0.7"

# Pagination Configuration (Optional - customize page sizes)
# PAGE_SIZE: Default number of items per page (default: 20)
# PAGE_SIZE="20"
# MAX_PAGE_SIZE: Maximum allowed page size to prevent performance issues (default: 100)
# MAX_PAGE_SIZE="100"
# CONTEXT_GROUP_PAGE_SIZE: Page size for context group listings (default: 50)
# CONTEXT_GROUP_PAGE_SIZE="50"
# MAX_LINKING_CANDIDATES: Maximum candidates to consider during relationship discovery (default: 100)
# MAX_LINKING_CANDIDATES="100"
# SYNC_RECONCILIATION_LIMIT: Batch size for sync reconciliation job (default: 100)
# SYNC_RECONCILIATION_LIMIT="100"

# Rate Limiting Configuration (Optional - requests per minute)
# OAUTH_RATE_LIMIT: OAuth endpoints rate limit (default: 10)
# OAUTH_RATE_LIMIT="10"
# API_RATE_LIMIT: Standard API endpoints rate limit (default: 100)
# API_RATE_LIMIT="100"
# WEBHOOK_RATE_LIMIT: Webhook endpoints rate limit (default: 1000)
# WEBHOOK_RATE_LIMIT="1000"

# Cache TTL Configuration (Optional - in seconds)
# CONTEXT_GROUP_CACHE_TTL: Context group cache duration (default: 300 = 5 minutes)
# CONTEXT_GROUP_CACHE_TTL="300"
# USER_PROFILE_CACHE_TTL: User profile cache duration (default: 600 = 10 minutes)
# USER_PROFILE_CACHE_TTL="600"
# PLATFORM_DATA_CACHE_TTL: Platform data cache duration (default: 180 = 3 minutes)
# PLATFORM_DATA_CACHE_TTL="180"

# Distributed Locking Configuration (Optional)
# LOCK_TTL_MS: Default lock time-to-live in milliseconds (default: 10000 = 10 seconds)
# LOCK_TTL_MS="10000"
# LOCK_RETRY_COUNT: Number of lock acquisition retries (default: 3)
# LOCK_RETRY_COUNT="3"
# LOCK_RETRY_DELAY_MS: Delay between retry attempts in milliseconds (default: 200)
# LOCK_RETRY_DELAY_MS="200"

# Neo4j Graph Database
NEO4J_URI="bolt://localhost:7687"
NEO4J_USERNAME="neo4j"
NEO4J_PASSWORD="your_neo4j_password"

# Redis (Optional - for caching and distributed locking)
# If not configured, the system will run without caching/locking (single-instance only)
# Format: redis://[[username]:[password]@][host][:port][/database]
# Examples:
#   - Local: redis://localhost:6379
#   - With auth: redis://:password@localhost:6379
#   - Remote: redis://user:password@redis.example.com:6379/0
REDIS_URL="redis://localhost:6379"

# Distributed Tracing (Optional - OpenTelemetry)
# Enable tracing to track requests across services and identify performance bottlenecks
TRACING_ENABLED="false"
# Exporter type: jaeger (default), otlp (for Datadog/New Relic), console (debugging)
TRACING_EXPORTER="jaeger"
# Service identification
SERVICE_NAME="kushim-api"
SERVICE_VERSION="1.0.0"
# Jaeger endpoint (when TRACING_EXPORTER=jaeger)
JAEGER_ENDPOINT="http://localhost:14268/api/traces"
# OTLP endpoint (when TRACING_EXPORTER=otlp)
# OTLP_ENDPOINT="http://localhost:4318/v1/traces"
# OTLP_HEADERS='{"DD-API-KEY":"your_datadog_api_key"}'

# GitHub OAuth
GITHUB_CLIENT_ID="your_github_client_id"
GITHUB_CLIENT_SECRET="your_github_client_secret"
GITHUB_CALLBACK_URL="http://localhost:3001/ingestion/oauth/github/callback"

# Jira OAuth
JIRA_CLIENT_ID="your_jira_client_id"
JIRA_CLIENT_SECRET="your_jira_client_secret"
JIRA_CALLBACK_URL="http://localhost:3001/ingestion/oauth/jira/callback"

# Slack OAuth
SLACK_CLIENT_ID="your_slack_client_id"
SLACK_CLIENT_SECRET="your_slack_client_secret"
SLACK_CALLBACK_URL="http://localhost:3001/ingestion/oauth/slack/callback"

# Google Workspace OAuth
GOOGLE_CLIENT_ID="your_google_client_id"
GOOGLE_CLIENT_SECRET="your_google_client_secret"
GOOGLE_CALLBACK_URL="http://localhost:3001/ingestion/oauth/google/callback"

# Webhook Secrets (for signature verification)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
GITHUB_WEBHOOK_SECRET="your_github_webhook_secret"
SLACK_SIGNING_SECRET="your_slack_signing_secret"
JIRA_WEBHOOK_SECRET="your_jira_webhook_secret"

# Frontend URL
FRONTEND_URL="http://localhost:3000"
